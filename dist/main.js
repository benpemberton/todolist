(()=>{"use strict";const e={newProject(e){this[e]=[]},getProjectName(t){for(const n in e)if(e[n]===t)return n},getProjectNames(){const t=[];for(const n in e)"object"==typeof e[n]&&t.push(n);return t},getProjIndex(e){const t=this.getProjectNames();if(t.length>0)return t.findIndex((t=>{if(t===e)return!0}))}};function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){t(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function r(e){t(1,arguments);var r=n(e);return r.setHours(0,0,0,0),r}function o(e,n){t(2,arguments);var o=r(e),a=r(n);return o.getTime()===a.getTime()}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var i=36e5,s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e,n){t(1,arguments);var r=n||{},o=null==r.additionalDigits?2:a(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,s=m(e);if(s.date){var l=f(s.date,o);i=p(l.restDateString,l.year)}if(isNaN(i)||!i)return new Date(NaN);var c,d=i.getTime(),u=0;if(s.time&&(u=v(s.time),isNaN(u)||null===u))return new Date(NaN);if(!s.timezone){var y=new Date(d+u),g=new Date(0);return g.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),g.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),g}return c=S(s.timezone),isNaN(c)?new Date(NaN):new Date(d+u+c)}function m(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=s.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function f(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var o=r[1]&&parseInt(r[1]),a=r[2]&&parseInt(r[2]);return{year:null==a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}function p(e,t){if(null===t)return null;var n=e.match(l);if(!n)return null;var r=!!n[4],o=y(n[1]),a=y(n[2])-1,i=y(n[3]),s=y(n[4]),c=y(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,c)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,s,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(h[t]||(b(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(b(e)?366:365)}(t,o)?(d.setUTCFullYear(t,a,Math.max(o,i)),d):new Date(NaN)}function y(e){return e?parseInt(e):1}function v(e){var t=e.match(c);if(!t)return null;var n=g(t[1]),r=g(t[2]),o=g(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*i+6e4*r+1e3*o:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function S(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*i+6e4*o):NaN}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function b(e){return e%400==0||e%4==0&&e%100}function j(e,r){t(1,arguments);var o=r||{},i=o.locale,s=i&&i.options&&i.options.weekStartsOn,l=null==s?0:a(s),c=null==o.weekStartsOn?l:a(o.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=n(e),u=d.getDay(),m=(u<c?7:0)+u-c;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function k(e,n,r){t(2,arguments);var o=j(e,r),a=j(n,r);return o.getTime()===a.getTime()}let q={displayAll(){let t=[];return e.getProjectNames().forEach((n=>{e[n].forEach((e=>{t.push(e)}))})),t=this.sortByInputTime(t),t},displayToday(){let n=[];return e.getProjectNames().forEach((r=>{e[r].forEach((e=>{(function(e){return t(1,arguments),o(e,Date.now())})(u(e.dueDate))&&n.push(e)}))})),n=this.sortByInputTime(n),n},displayWeek(){let n=[];return e.getProjectNames().forEach((r=>{e[r].forEach((e=>{(function(e,n){return t(1,arguments),k(e,Date.now(),n)})(u(e.dueDate))&&n.push(e)}))})),n=this.sortByInputTime(n),n},sortByInputTime:e=>(e.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0)),e)};const E=(t,n,r,o)=>({name:t,description:n,dueDate:r,id:Date.now(),project:e.getProjectName(o)}),w=(e,t)=>{t.push(e)},N=(e,t)=>t.find((t=>{for(const n in t)if(t[n]==e)return t})),L=(e,t,n)=>{const r=n.findIndex((t=>{for(const n in t)if(t[n]==e)return!0})),o={name:t[0],description:t[1],dueDate:t[2]},a=n[r];for(const e in o)a[e]=o[e]},T=(e,t)=>{const n=t.findIndex((t=>{for(const n in t)if(t[n]==e)return!0}));t.splice(n,1)},D={addTask(e){if(localStorage[e.project]){let t=JSON.parse(localStorage.getItem(`${e.project}`));w(e,t),localStorage.setItem(`${e.project}`,JSON.stringify(t))}else localStorage.setItem(`${e.project}`,JSON.stringify([e]))},editTask(e,t,n){const r=N(e,n);let o=JSON.parse(localStorage.getItem(`${r.project}`));L(e,t,o),localStorage.setItem(`${r.project}`,JSON.stringify(o))},deleteTask(e,t){const n=N(e,t);let r=JSON.parse(localStorage.getItem(`${n.project}`));T(e,r),localStorage.setItem(`${n.project}`,JSON.stringify(r))},retrieveTasks(){const t=["length","clear","key","setItem","getItem","removeItem"];for(const n in localStorage)if(!t.includes(n)){let t=JSON.parse(localStorage.getItem(`${n}`));e.newProject(n),t.forEach((t=>{e[n].push(t)}))}},deleteProject(e){localStorage.removeItem(`${e}`)}};console.log(localStorage);const I=()=>{x();const e=document.createElement("div");e.id="form-container",e.innerHTML='<form id="task-form">\n        <input type="text" id="new-task-title" class ="form-input" \n        placeholder="Task name...">\n        <input type="text" id="new-task-desc" class="form-input"\n        placeholder="Description...">\n        <div id="pri-date-row">\n        <label for="due-date" id="date-label">Due date:\n        </label>\n        <input type="date" id="due-date" class="form-input">\n        </div>\n        <button type="button" id="cancel-task">Cancel</button>\n        <button type="button" id="submit-task">Add</button>\n    </form>';const t=document.querySelector(".task-list-window"),n=document.querySelector(".add-task");t.insertBefore(e,n),A()},x=()=>{const e=document.querySelector(".add-task");"hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"},$=()=>{document.querySelector(".add-task").style.visibility="hidden"},C=()=>{document.querySelector(".add-task").style.visibility="visible"},A=()=>{document.getElementById("submit-task").addEventListener("click",P),document.getElementById("cancel-task").addEventListener("click",O)},P=()=>{const e=document.getElementById("task-form");if(B(e)){const t=ee(e,".form-input"),n=de(),r=E(...t,n);w(r,n),D.addTask(r);const o=n.length-1;M(n,o),U(),x()}},O=()=>{U(),x()},B=e=>{const t=e.querySelectorAll(".form-input"),n=[];if(t.forEach((e=>{""===e.value&&n.push(!1)})),0===n.length)return!0},U=()=>{document.getElementById("form-container").remove()},M=(e,t)=>{H(e,t),J(e,t)},H=(e,t)=>{const n=document.createElement("div");n.classList.add("task-entry"),n.dataset.id=e[t].id,n.innerHTML='<div class="task-details">\n        <div class="task-entry-title">\n        <input class="edit-details" readonly></input>\n        </div>\n        <div class="proj-tag">\n        <span class="proj-name"></input>\n        </div>\n    </div>\n    <div class="task-entry-icons">\n        <i class="fas fa-plus"></i>\n        <i class="far fa-edit"></i>\n        <i class="far fa-trash-alt"></i>\n    </div>',n.querySelector(".edit-details").value=e[t].name,de()===q&&(n.querySelector(".proj-name").textContent=`${e[t].project}`);const r=document.querySelector(".task-list-window"),o=document.querySelector(".add-task");r.insertBefore(n,o),Z(n)},J=(e,t)=>{const n=document.createElement("div");n.classList.add("date-entry"),n.dataset.id=e[t].id,n.innerHTML='<input type="date" class="due-date \n        edit-details" readonly="">',n.querySelector(".due-date").value=e[t].dueDate;const r=document.querySelector(".task-list-window"),o=document.querySelector(".add-task");r.insertBefore(n,o)},Z=e=>{e.querySelector(".fa-plus").addEventListener("click",z),e.querySelector(".fa-edit").addEventListener("click",z),e.querySelector(".fa-trash-alt").addEventListener("click",ne)},z=t=>{const n=t.target.closest(".task-entry"),r=t.target,o=n.dataset.id;let a=de();if(a===q){const t=n.querySelector(".proj-name").textContent;a=e[t]}const i=N(o,a);r.classList.contains("fa-plus")||r.classList.contains("fa-minus")?F(i,r,n):r.classList.contains("fa-edit")&&_(n,i)},F=(e,t,n)=>{t.classList.contains("fa-plus")?(t.classList.remove("fa-plus"),t.classList.add("fa-minus"),R(e,t)):(t.classList.remove("fa-minus"),t.classList.add("fa-plus"),Y(n,e))},Y=(e,t)=>{e.querySelector(".append-details").remove();const n=document.querySelectorAll(`[data-id="${t.id}"]`);e.querySelector(".save-btn")&&(te(e),G(n),K(n),X(e))},R=(e,t)=>{const n=t.closest(".task-entry").querySelector(".task-details"),r=document.createElement("div");r.classList.add("append-details"),r.innerHTML='<textarea type="text" class="task-desc edit-details" \n        readonly></textarea>',r.querySelector(".task-desc").value=e.description,n.appendChild(r),W(".task-desc")},W=e=>{const t=document.querySelector(`${e}`);t.style.height=t.scrollHeight+"px"},_=(e,t)=>{const n=e.querySelector(".fa-plus");e.querySelector(".append-details")||F(t,n,e);const r=document.querySelectorAll(`[data-id="${t.id}"]`);G(r),K(r),Q(e)},G=e=>{e.forEach((e=>{e.querySelectorAll(".edit-details").forEach((e=>{e.readOnly||e.disabled?(e.readOnly=!1,e.disabled=!1):(e.readOnly=!0,e.disabled=!0)}))}))},K=e=>{e.forEach((e=>{e.querySelectorAll(".edit-details").forEach((e=>{e.classList.contains("edit-highlight")?e.classList.remove("edit-highlight"):e.classList.add("edit-highlight")}))}))},Q=e=>{const t=document.createElement("button");t.classList.add("save-btn"),t.textContent="Save",t.addEventListener("click",V),e.appendChild(t),te(e)},V=t=>{const n=t.target.closest(".task-entry"),r=n.dataset.id,o=document.querySelectorAll(`[data-id="${r}"]`),a=n.querySelector(".proj-name");let i=de();i===q&&(i=e[a.textContent]);const s=ee(o,".edit-details");X(n),te(n),L(r,s,i),D.editTask(r,s,i),G(o),K(o)},X=e=>{const t=e.querySelector(".save-btn");t&&t.remove()},ee=(e,t)=>{if(NodeList.prototype.isPrototypeOf(e)){const n=[];return e.forEach((e=>{e.querySelectorAll(t).forEach((e=>n.push(e.value)))})),n}{const n=e.querySelectorAll(t),r=[];return n.forEach((e=>r.push(e.value))),r}},te=e=>{const t=e.querySelector(".fa-edit");"none"===t.style.pointerEvents?t.style.pointerEvents="auto":t.style.pointerEvents="none"},ne=t=>{const n=t.target.closest(".task-entry"),r=n.dataset.id,o=n.querySelector(".proj-name");let a=de();a===q&&(a=e[o.textContent]),re(r),D.deleteTask(r,a),T(r,a)},re=e=>{document.querySelectorAll(`[data-id="${e}"]`).forEach((e=>e.remove()))},oe=e=>{if("I"!=e.target.nodeName){se();const t=e.currentTarget;t.classList.add("side-btn-active"),ae();const n=de();"display-all"===t.id?($(),ie(q.displayAll())):"display-today"===t.id?($(),ie(q.displayToday())):"display-week"===t.id?($(),ie(q.displayWeek())):(C(),ie(n))}},ae=()=>{const e=document.querySelectorAll(".task-entry"),t=document.querySelectorAll(".date-entry");e.forEach((e=>e.remove())),t.forEach((e=>e.remove()));const n=document.getElementById("form-container");n&&n.remove()},ie=e=>{for(let t=0;t<e.length;t++)M(e,t)},se=()=>{document.querySelectorAll(".side-btn").forEach((e=>{e.classList.remove("side-btn-active")}))},le=()=>{document.querySelectorAll(".proj-btn")[0].classList.add("side-btn-active")},ce=()=>document.querySelector(".side-btn-active"),de=()=>{if(ce().closest(".task-view-menu"))return q;{const t=ce().id.split("-")[1];return e[t]}},ue=()=>{fe(),me()},me=()=>{const e=document.createElement("div");e.classList.add("project-form-box"),e.innerHTML='<form id="project-form">\n        <input type="text" id="new-project-title" class ="form-input" \n        placeholder="Project name...">\n        <button type="button" id="cancel-project">Cancel</button>\n        <button type="button" id="submit-project">Add</button>\n    </form>',e.querySelector("#cancel-project").addEventListener("click",pe),e.querySelector("#submit-project").addEventListener("click",ve);const t=document.querySelector(".project-view-menu"),n=t.querySelector(".add-project");t.insertBefore(e,n)},fe=()=>{const e=document.querySelector(".add-project");"hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"},pe=()=>{ye(),fe()},ye=()=>{document.querySelector(".project-form-box").remove()},ve=()=>{const t=document.querySelector(".project-form-box");if(""!==t.querySelector(".form-input").value){let n=ee(t,".form-input");n=be(n[0]),e.newProject(n),ye(),ge(),Se(),se(),document.querySelector(`#proj-${n}`).classList.add("side-btn-active"),ae();const r=de();C(),ie(r),fe()}},ge=()=>{document.querySelector(".project-view-menu").querySelectorAll(".side-btn").forEach((e=>e.remove()))},Se=()=>{const t=e.getProjectNames(),n=document.querySelector(".project-view-menu"),r=n.querySelector(".add-project");for(let e=0;e<t.length;e++){const o=document.createElement("button");o.id=`proj-${t[e]}`,o.classList.add("side-btn"),o.classList.add("proj-btn");let a=je(t[[e]]);a=a.charAt(0).toUpperCase()+a.slice(1),o.innerHTML=`<span>${a}</span>\n            <div class="rem-icon-box">\n            <i class="fas fa-times" aria-hidden="true"></i>\n            </div>`;const i=o.querySelector("i");i.addEventListener("click",he),o.addEventListener("click",oe),o.addEventListener("mouseover",(()=>{i.style.visibility="visible"})),o.addEventListener("mouseout",(()=>{i.style.visibility="hidden"})),n.insertBefore(o,r)}},he=t=>{const n=t.target.closest(".side-btn"),r=n.id.split("-")[1],o=e.getProjIndex(r);if(delete e[r],D.deleteProject(r),n.classList.contains("side-btn-active")){const t=e.getProjectNames();let r=t[o];if(o>t.length-1&&(r=t[o-1]),n.remove(),ae(),e.getProjectNames().length>0){document.querySelector(`#proj-${r}`).classList.add("side-btn-active");const e=de();C(),ie(e)}else $()}else n.remove()},be=e=>{const t=e.split(" ");if(t.length>1){let e=t[0];for(let n=1;n<t.length;n++)e+="_"+t[n];return e}return e},je=e=>{const t=e.split("_");let n=t[0];for(let e=1;e<t.length;e++)n+=" "+t[e];return n};window.onload=(()=>{if(localStorage.length>0){D.retrieveTasks(),Se(),le();const t=ce().id.split("-")[1];ie(e[t])}else e.general=[],Se(),le();document.querySelector(".add-task").addEventListener("click",I),document.querySelectorAll(".side-btn").forEach((e=>{e.addEventListener("click",oe)})),document.querySelector(".add-project").addEventListener("click",ue)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9zY3JpcHRzL21vZHVsZXMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3BhcnNlSVNPL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9zY3JpcHRzL21vZHVsZXMvdG9kb2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvc2NyaXB0cy9tb2R1bGVzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvc2NyaXB0cy9tb2R1bGVzL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2FwcC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbInByb2plY3RzIiwibmFtZSIsInRoaXMiLCJhcnJheSIsInByb3AiLCJuYW1lcyIsInB1c2giLCJwcm9qZWN0IiwicHJvak5hbWVzIiwiZ2V0UHJvamVjdE5hbWVzIiwibGVuZ3RoIiwiZmluZEluZGV4IiwicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwiVHlwZUVycm9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJNSUxMSVNFQ09ORFNfSU5fSE9VUiIsInBhdHRlcm5zIiwiZGF0ZVRpbWVEZWxpbWl0ZXIiLCJ0aW1lWm9uZURlbGltaXRlciIsInRpbWV6b25lIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4IiwidGltZXpvbmVSZWdleCIsInBhcnNlSVNPIiwiZGlydHlPcHRpb25zIiwib3B0aW9ucyIsImFkZGl0aW9uYWxEaWdpdHMiLCJSYW5nZUVycm9yIiwiZGF0ZVN0cmluZ3MiLCJzcGxpdERhdGVTdHJpbmciLCJwYXJzZVllYXJSZXN1bHQiLCJwYXJzZVllYXIiLCJwYXJzZURhdGUiLCJyZXN0RGF0ZVN0cmluZyIsInllYXIiLCJvZmZzZXQiLCJ0aW1lc3RhbXAiLCJ0aW1lIiwicGFyc2VUaW1lIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsImdldFVUQ0hvdXJzIiwiZ2V0VVRDTWludXRlcyIsImdldFVUQ1NlY29uZHMiLCJnZXRVVENNaWxsaXNlY29uZHMiLCJwYXJzZVRpbWV6b25lIiwiZGF0ZVN0cmluZyIsInRpbWVTdHJpbmciLCJzcGxpdCIsInRlc3QiLCJzdWJzdHIiLCJ0b2tlbiIsImV4ZWMiLCJyZXBsYWNlIiwicmVnZXgiLCJSZWdFeHAiLCJjYXB0dXJlcyIsIm1hdGNoIiwicGFyc2VJbnQiLCJjZW50dXJ5Iiwic2xpY2UiLCJpc1dlZWtEYXRlIiwiZGF5T2ZZZWFyIiwicGFyc2VEYXRlVW5pdCIsIm1vbnRoIiwiZGF5Iiwid2VlayIsImRheU9mV2VlayIsIl95ZWFyIiwidmFsaWRhdGVXZWVrRGF0ZSIsImlzb1dlZWtZZWFyIiwic2V0VVRDRnVsbFllYXIiLCJkaWZmIiwiZ2V0VVRDRGF5Iiwic2V0VVRDRGF0ZSIsImRheU9mSVNPV2Vla1llYXIiLCJkYXlzSW5Nb250aHMiLCJpc0xlYXBZZWFySW5kZXgiLCJ2YWxpZGF0ZURhdGUiLCJ2YWxpZGF0ZURheU9mWWVhckRhdGUiLCJtYXgiLCJ2YWx1ZSIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VGbG9hdCIsInRpbWV6b25lU3RyaW5nIiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJzdGFydE9mV2VlayIsImxvY2FsZSIsImxvY2FsZVdlZWtTdGFydHNPbiIsIndlZWtTdGFydHNPbiIsImRlZmF1bHRXZWVrU3RhcnRzT24iLCJnZXREYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJ0b0RvTGlzdCIsImFsbEFycmF5IiwiZm9yRWFjaCIsInByb2oiLCJvYmoiLCJzb3J0QnlJbnB1dFRpbWUiLCJ0b2RheUFycmF5Iiwibm93IiwiaXNUb2RheSIsImR1ZURhdGUiLCJ3ZWVrQXJyYXkiLCJpc1RoaXNXZWVrIiwic29ydCIsImEiLCJiIiwiaWQiLCJkZXNjcmlwdGlvbiIsImdldFByb2plY3ROYW1lIiwidGFzayIsImZpbmQiLCJkZXRhaWxzIiwiaW5kZXgiLCJkZXRhaWxzT2JqIiwic3BsaWNlIiwic3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInRlbXBBcnJheSIsIkpTT04iLCJwYXJzZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwibWV0aG9kcyIsImluY2x1ZGVzIiwic3RvcmVkQXJyYXkiLCJuZXdQcm9qZWN0IiwicmVtb3ZlSXRlbSIsImxvZyIsImFwcGVuZFRhc2tGb3JtIiwidG9nZ2xlQWRkVGFza0J0biIsImRpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRhc2tMaXN0IiwicXVlcnlTZWxlY3RvciIsImJ0biIsImluc2VydEJlZm9yZSIsImFjdGl2YXRlRm9ybUJ0bnMiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJoaWRlQWRkVGFza0J0biIsInNob3dBZGRUYXNrQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkVGFza0J0bkhhbmRsZXIiLCJjYW5jZWxUYXNrQnRuSGFuZGxlciIsImNoZWNrVGFza0Zvcm0iLCJnZXRGb3JtSW5mbyIsInNldEN1cnJlbnRBcnJheSIsImFkZFRhc2siLCJhcHBlbmROZXdUYXNrIiwicmVtb3ZlVGFza0Zvcm0iLCJlbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdGF0dXMiLCJlbGVtZW50IiwicmVtb3ZlIiwiaW5zZXJ0VGFza05hbWUiLCJpbnNlcnRUYXNrRGF0ZSIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJ0ZXh0Q29udGVudCIsImFjdGl2YXRlVGFza0ljb25zIiwidG9nZ2xlSWNvbnNIYW5kbGVyIiwicmVtb3ZlSWNvbkhhbmRsZXIiLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImljb24iLCJjb250YWlucyIsInRvZ2dsZVBsdXNJY29uIiwiZWRpdERldGFpbHMiLCJhcHBlbmRUYXNrRGV0YWlscyIsIm1pbmltaXNlVGFzayIsImRpdnMiLCJ0b2dnbGVFZGl0SWNvbiIsInRvZ2dsZVJlYWRPbmx5IiwidG9nZ2xlRWRpdEhpZ2hsaWdodCIsInJlbW92ZVNhdmVCdG4iLCJ0YXNrTmFtZURpdiIsImRldGFpbHNEaXYiLCJhcHBlbmRDaGlsZCIsImF1dG9IZWlnaHQiLCJlbCIsImhlaWdodCIsImluc2VydFNhdmVCdG4iLCJpbnB1dCIsInJlYWRPbmx5IiwiZGlzYWJsZWQiLCJzYXZlQnRuSGFuZGxlciIsInByb2pOYW1lIiwiZWRpdFRhc2siLCJzYXZlQnRuIiwic2VsZWN0b3IiLCJOb2RlTGlzdCIsImlzUHJvdG90eXBlT2YiLCJ2YWx1ZXMiLCJwb2ludGVyRXZlbnRzIiwicmVtb3ZlVGFza0FuZERhdGUiLCJkZWxldGVUYXNrIiwic2lkZUJ0bkNsaWNrZWQiLCJub2RlTmFtZSIsInR1cm5PZmZTaWRlQnRucyIsImN1cnJlbnRCdG4iLCJjdXJyZW50VGFyZ2V0IiwiY2xlYXJUYXNrV2luZG93IiwicG9wdWxhdGVUYXNrV2luZG93IiwiZGlzcGxheUFsbCIsImRpc3BsYXlUb2RheSIsImRpc3BsYXlXZWVrIiwidGFza3MiLCJkYXRlcyIsImZvcm0iLCJpIiwic2V0Q3VycmVudEJ0biIsImdldEN1cnJlbnRCdG4iLCJhZGRQcm9qZWN0QnRuSGFuZGxlciIsInRvZ2dsZUFkZFByb2plY3RCdG4iLCJpbnNlcnRQcm9qZWN0Rm9ybSIsImNhbmNlbFByb2plY3RCdG5IYW5kbGVyIiwic3VibWl0UHJvamVjdEJ0bkhhbmRsZXIiLCJwcm9qZWN0TWVudSIsImhpZGRlbkJ0biIsInJlbW92ZVByb2plY3RGb3JtIiwicHJvakRpdiIsInVuZGVyc2NvcmVQcm9qTmFtZSIsImNsZWFyUHJvamVjdEJ0bnMiLCJwb3B1bGF0ZVByb2plY3RCdG5zIiwiYnRuQXJyYXkiLCJuYW1lVXBwZXIiLCJkZXNjb3JlUHJvak5hbWUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInJlbW92ZVByb2plY3RIYW5kbGVyIiwiZ2V0UHJvakluZGV4IiwiZGVsZXRlUHJvamVjdCIsIm5ld1Byb2oiLCJwYXJ0cyIsInNjb3JlZE5hbWUiLCJzcGFjZWROYW1lIiwid2luZG93Iiwib25sb2FkIiwicmV0cmlldmVUYXNrcyIsImdlbmVyYWwiLCJsb2FkUGFnZSJdLCJtYXBwaW5ncyI6Im1CQUFBLE1BQU1BLEVBQVcsQ0FFYixXQUFXQyxHQUNQQyxLQUFLRCxHQUFRLElBR2pCLGVBQWVFLEdBQ1gsSUFBSyxNQUFNQyxLQUFRSixFQUNmLEdBQUlBLEVBQVNJLEtBQVVELEVBQ25CLE9BQU9DLEdBS25CLGtCQUNJLE1BQU1DLEVBQVEsR0FFZCxJQUFLLE1BQU1ELEtBQVFKLEVBQ2UsaUJBQW5CQSxFQUFTSSxJQUNoQkMsRUFBTUMsS0FBS0YsR0FHbkIsT0FBT0MsR0FHWCxhQUFhRSxHQUNULE1BQU1DLEVBQVlOLEtBQUtPLGtCQUV2QixHQUFJRCxFQUFVRSxPQUFTLEVBT25CLE9BTllGLEVBQVVHLFdBQVVWLElBQzVCLEdBQUlBLElBQVNNLEVBQ1QsT0FBTyxPQy9CWixTQUFTSyxFQUFhQyxFQUFVQyxHQUM3QyxHQUFJQSxFQUFLSixPQUFTRyxFQUNoQixNQUFNLElBQUlFLFVBQVVGLEVBQVcsYUFBZUEsRUFBVyxFQUFJLElBQU0sSUFBTSx1QkFBeUJDLEVBQUtKLE9BQVMsWUM4QnJHLFNBQVNNLEVBQU9DLEdBQzdCTCxFQUFhLEVBQUdNLFdBQ2hCLElBQUlDLEVBQVNDLE9BQU9DLFVBQVVDLFNBQVNDLEtBQUtOLEdBRTVDLE9BQUlBLGFBQW9CTyxNQUE0QixpQkFBYlAsR0FBb0Msa0JBQVhFLEVBRXZELElBQUlLLEtBQUtQLEVBQVNRLFdBQ0ksaUJBQWJSLEdBQW9D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QUFJUSxpQkFBaUIsUUFDckIwRCxPQXNGUXZFLFNBQVNJLGNBQWMsZ0JBQy9CUyxpQkFBaUIsUUFBUzBFLEtDM2lCbEI0QixJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm9qZWN0cyA9IHtcblxuICAgIG5ld1Byb2plY3QobmFtZSkge1xuICAgICAgICB0aGlzW25hbWVdID0gW107XG4gICAgfSxcblxuICAgIGdldFByb2plY3ROYW1lKGFycmF5KSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBwcm9qZWN0cykge1xuICAgICAgICAgICAgaWYgKHByb2plY3RzW3Byb3BdID09PSBhcnJheSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldFByb2plY3ROYW1lcygpIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcHJvamVjdHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvamVjdHNbcHJvcF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgbmFtZXMucHVzaChwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmFtZXM7XG4gICAgfSxcblxuICAgIGdldFByb2pJbmRleChwcm9qZWN0KSB7XG4gICAgICAgIGNvbnN0IHByb2pOYW1lcyA9IHRoaXMuZ2V0UHJvamVjdE5hbWVzKCk7XG4gICAgXG4gICAgICAgIGlmIChwcm9qTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gcHJvak5hbWVzLmZpbmRJbmRleChuYW1lID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gcHJvamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cblxufTtcblxuZXhwb3J0IHsgcHJvamVjdHMgfSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdC5pby9manVsZVwiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheT9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG52YXIgTUlMTElTRUNPTkRTX0lOX0hPVVIgPSAzNjAwMDAwO1xudmFyIE1JTExJU0VDT05EU19JTl9NSU5VVEUgPSA2MDAwMDtcbnZhciBERUZBVUxUX0FERElUSU9OQUxfRElHSVRTID0gMjtcbnZhciBwYXR0ZXJucyA9IHtcbiAgZGF0ZVRpbWVEZWxpbWl0ZXI6IC9bVCBdLyxcbiAgdGltZVpvbmVEZWxpbWl0ZXI6IC9bWiBdL2ksXG4gIHRpbWV6b25lOiAvKFtaKy1dLiopJC9cbn07XG52YXIgZGF0ZVJlZ2V4ID0gL14tPyg/OihcXGR7M30pfChcXGR7Mn0pKD86LT8oXFxkezJ9KSk/fFcoXFxkezJ9KSg/Oi0/KFxcZHsxfSkpP3wpJC87XG52YXIgdGltZVJlZ2V4ID0gL14oXFxkezJ9KD86Wy4sXVxcZCopPykoPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/KD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyQvO1xudmFyIHRpbWV6b25lUmVnZXggPSAvXihbKy1dKShcXGR7Mn0pKD86Oj8oXFxkezJ9KSk/JC87XG4vKipcbiAqIEBuYW1lIHBhcnNlSVNPXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFBhcnNlIElTTyBzdHJpbmdcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgaW4gSVNPIDg2MDEgZm9ybWF0IGFuZCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBGdW5jdGlvbiBhY2NlcHRzIGNvbXBsZXRlIElTTyA4NjAxIGZvcm1hdHMgYXMgd2VsbCBhcyBwYXJ0aWFsIGltcGxlbWVudGF0aW9ucy5cbiAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzbid0IGEgc3RyaW5nLCB0aGUgZnVuY3Rpb24gY2Fubm90IHBhcnNlIHRoZSBzdHJpbmcgb3JcbiAqIHRoZSB2YWx1ZXMgYXJlIGludmFsaWQsIGl0IHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogLSBUaGUgcHJldmlvdXMgYHBhcnNlYCBpbXBsZW1lbnRhdGlvbiB3YXMgcmVuYW1lZCB0byBgcGFyc2VJU09gLlxuICpcbiAqICAgYGBgamF2YXNjcmlwdFxuICogICAvLyBCZWZvcmUgdjIuMC4wXG4gKiAgIHBhcnNlKCcyMDE2LTAxLTAxJylcbiAqXG4gKiAgIC8vIHYyLjAuMCBvbndhcmRcbiAqICAgcGFyc2VJU08oJzIwMTYtMDEtMDEnKVxuICogICBgYGBcbiAqXG4gKiAtIGBwYXJzZUlTT2Agbm93IHZhbGlkYXRlcyBzZXBhcmF0ZSBkYXRlIGFuZCB0aW1lIHZhbHVlcyBpbiBJU08tODYwMSBzdHJpbmdzXG4gKiAgIGFuZCByZXR1cm5zIGBJbnZhbGlkIERhdGVgIGlmIHRoZSBkYXRlIGlzIGludmFsaWQuXG4gKlxuICogICBgYGBqYXZhc2NyaXB0XG4gKiAgIHBhcnNlSVNPKCcyMDE4LTEzLTMyJylcbiAqICAgLy89PiBJbnZhbGlkIERhdGVcbiAqICAgYGBgXG4gKlxuICogLSBgcGFyc2VJU09gIG5vdyBkb2Vzbid0IGZhbGwgYmFjayB0byBgbmV3IERhdGVgIGNvbnN0cnVjdG9yXG4gKiAgIGlmIGl0IGZhaWxzIHRvIHBhcnNlIGEgc3RyaW5nIGFyZ3VtZW50LiBJbnN0ZWFkLCBpdCByZXR1cm5zIGBJbnZhbGlkIERhdGVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHNgIG11c3QgYmUgMCwgMSBvciAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcyMDE0LTAyLTExVDExOjMwOjMwJyB0byBkYXRlOlxuICogdmFyIHJlc3VsdCA9IHBhcnNlSVNPKCcyMDE0LTAyLTExVDExOjMwOjMwJylcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcrMDIwMTQxMDEnIHRvIGRhdGUsXG4gKiAvLyBpZiB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdCBpcyAxOlxuICogdmFyIHJlc3VsdCA9IHBhcnNlSVNPKCcrMDIwMTQxMDEnLCB7IGFkZGl0aW9uYWxEaWdpdHM6IDEgfSlcbiAqIC8vPT4gRnJpIEFwciAxMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VJU08oYXJndW1lbnQsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gIHZhciBhZGRpdGlvbmFsRGlnaXRzID0gb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzID09IG51bGwgPyBERUZBVUxUX0FERElUSU9OQUxfRElHSVRTIDogdG9JbnRlZ2VyKG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0cyk7XG5cbiAgaWYgKGFkZGl0aW9uYWxEaWdpdHMgIT09IDIgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMSAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2FkZGl0aW9uYWxEaWdpdHMgbXVzdCBiZSAwLCAxIG9yIDInKTtcbiAgfVxuXG4gIGlmICghKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICB2YXIgZGF0ZVN0cmluZ3MgPSBzcGxpdERhdGVTdHJpbmcoYXJndW1lbnQpO1xuICB2YXIgZGF0ZTtcblxuICBpZiAoZGF0ZVN0cmluZ3MuZGF0ZSkge1xuICAgIHZhciBwYXJzZVllYXJSZXN1bHQgPSBwYXJzZVllYXIoZGF0ZVN0cmluZ3MuZGF0ZSwgYWRkaXRpb25hbERpZ2l0cyk7XG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShwYXJzZVllYXJSZXN1bHQucmVzdERhdGVTdHJpbmcsIHBhcnNlWWVhclJlc3VsdC55ZWFyKTtcbiAgfVxuXG4gIGlmIChpc05hTihkYXRlKSB8fCAhZGF0ZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICB2YXIgdGltZSA9IDA7XG4gIHZhciBvZmZzZXQ7XG5cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHtcbiAgICB0aW1lID0gcGFyc2VUaW1lKGRhdGVTdHJpbmdzLnRpbWUpO1xuXG4gICAgaWYgKGlzTmFOKHRpbWUpIHx8IHRpbWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkYXRlU3RyaW5ncy50aW1lem9uZSkge1xuICAgIG9mZnNldCA9IHBhcnNlVGltZXpvbmUoZGF0ZVN0cmluZ3MudGltZXpvbmUpO1xuXG4gICAgaWYgKGlzTmFOKG9mZnNldCkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlydHlEYXRlID0gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSk7IC8vIGpzIHBhcnNlZCBzdHJpbmcgYXNzdW1pbmcgaXQncyBpbiBVVEMgdGltZXpvbmVcbiAgICAvLyBidXQgd2UgbmVlZCBpdCB0byBiZSBwYXJzZWQgaW4gb3VyIHRpbWV6b25lXG4gICAgLy8gc28gd2UgdXNlIHV0YyB2YWx1ZXMgdG8gYnVpbGQgZGF0ZSBpbiBvdXIgdGltZXpvbmUuXG4gICAgLy8gWWVhciB2YWx1ZXMgZnJvbSAwIHRvIDk5IG1hcCB0byB0aGUgeWVhcnMgMTkwMCB0byAxOTk5XG4gICAgLy8gc28gc2V0IHllYXIgZXhwbGljaXRseSB3aXRoIHNldEZ1bGxZZWFyLlxuXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEYXRlKDApO1xuICAgIHJlc3VsdC5zZXRGdWxsWWVhcihkaXJ0eURhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGlydHlEYXRlLmdldFVUQ01vbnRoKCksIGRpcnR5RGF0ZS5nZXRVVENEYXRlKCkpO1xuICAgIHJlc3VsdC5zZXRIb3VycyhkaXJ0eURhdGUuZ2V0VVRDSG91cnMoKSwgZGlydHlEYXRlLmdldFVUQ01pbnV0ZXMoKSwgZGlydHlEYXRlLmdldFVUQ1NlY29uZHMoKSwgZGlydHlEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUgKyBvZmZzZXQpO1xufVxuXG5mdW5jdGlvbiBzcGxpdERhdGVTdHJpbmcoZGF0ZVN0cmluZykge1xuICB2YXIgZGF0ZVN0cmluZ3MgPSB7fTtcbiAgdmFyIGFycmF5ID0gZGF0ZVN0cmluZy5zcGxpdChwYXR0ZXJucy5kYXRlVGltZURlbGltaXRlcik7XG4gIHZhciB0aW1lU3RyaW5nOyAvLyBUaGUgcmVnZXggbWF0Y2ggc2hvdWxkIG9ubHkgcmV0dXJuIGF0IG1heGltdW0gdHdvIGFycmF5IGVsZW1lbnRzLlxuICAvLyBbZGF0ZV0sIFt0aW1lXSwgb3IgW2RhdGUsIHRpbWVdLlxuXG4gIGlmIChhcnJheS5sZW5ndGggPiAyKSB7XG4gICAgcmV0dXJuIGRhdGVTdHJpbmdzO1xuICB9XG5cbiAgaWYgKC86Ly50ZXN0KGFycmF5WzBdKSkge1xuICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBudWxsO1xuICAgIHRpbWVTdHJpbmcgPSBhcnJheVswXTtcbiAgfSBlbHNlIHtcbiAgICBkYXRlU3RyaW5ncy5kYXRlID0gYXJyYXlbMF07XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzFdO1xuXG4gICAgaWYgKHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyLnRlc3QoZGF0ZVN0cmluZ3MuZGF0ZSkpIHtcbiAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyKVswXTtcbiAgICAgIHRpbWVTdHJpbmcgPSBkYXRlU3RyaW5nLnN1YnN0cihkYXRlU3RyaW5ncy5kYXRlLmxlbmd0aCwgZGF0ZVN0cmluZy5sZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aW1lU3RyaW5nKSB7XG4gICAgdmFyIHRva2VuID0gcGF0dGVybnMudGltZXpvbmUuZXhlYyh0aW1lU3RyaW5nKTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmcucmVwbGFjZSh0b2tlblsxXSwgJycpO1xuICAgICAgZGF0ZVN0cmluZ3MudGltZXpvbmUgPSB0b2tlblsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRhdGVTdHJpbmdzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVllYXIoZGF0ZVN0cmluZywgYWRkaXRpb25hbERpZ2l0cykge1xuICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdeKD86KFxcXFxkezR9fFsrLV1cXFxcZHsnICsgKDQgKyBhZGRpdGlvbmFsRGlnaXRzKSArICd9KXwoXFxcXGR7Mn18WystXVxcXFxkeycgKyAoMiArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pJCknKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChyZWdleCk7IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG5cbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIHtcbiAgICB5ZWFyOiBudWxsXG4gIH07XG4gIHZhciB5ZWFyID0gY2FwdHVyZXNbMV0gJiYgcGFyc2VJbnQoY2FwdHVyZXNbMV0pO1xuICB2YXIgY2VudHVyeSA9IGNhcHR1cmVzWzJdICYmIHBhcnNlSW50KGNhcHR1cmVzWzJdKTtcbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiBjZW50dXJ5ID09IG51bGwgPyB5ZWFyIDogY2VudHVyeSAqIDEwMCxcbiAgICByZXN0RGF0ZVN0cmluZzogZGF0ZVN0cmluZy5zbGljZSgoY2FwdHVyZXNbMV0gfHwgY2FwdHVyZXNbMl0pLmxlbmd0aClcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGVTdHJpbmcsIHllYXIpIHtcbiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcbiAgaWYgKHllYXIgPT09IG51bGwpIHJldHVybiBudWxsO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKGRhdGVSZWdleCk7IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCBzdHJpbmdcblxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gbnVsbDtcbiAgdmFyIGlzV2Vla0RhdGUgPSAhIWNhcHR1cmVzWzRdO1xuICB2YXIgZGF5T2ZZZWFyID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtb250aCA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMl0pIC0gMTtcbiAgdmFyIGRheSA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbM10pO1xuICB2YXIgd2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNF0pO1xuICB2YXIgZGF5T2ZXZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s1XSkgLSAxO1xuXG4gIGlmIChpc1dlZWtEYXRlKSB7XG4gICAgaWYgKCF2YWxpZGF0ZVdlZWtEYXRlKHllYXIsIHdlZWssIGRheU9mV2VlaykpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cblxuICAgIHJldHVybiBkYXlPZklTT1dlZWtZZWFyKHllYXIsIHdlZWssIGRheU9mV2Vlayk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcblxuICAgIGlmICghdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXkpIHx8ICF2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuXG4gICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgTWF0aC5tYXgoZGF5T2ZZZWFyLCBkYXkpKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZURhdGVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/IHBhcnNlSW50KHZhbHVlKSA6IDE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lU3RyaW5nKSB7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWVTdHJpbmcubWF0Y2godGltZVJlZ2V4KTtcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIG51bGw7IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lXG5cbiAgdmFyIGhvdXJzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtaW51dGVzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1syXSk7XG4gIHZhciBzZWNvbmRzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1szXSk7XG5cbiAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBob3VycyAqIE1JTExJU0VDT05EU19JTl9IT1VSICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUgKyBzZWNvbmRzICogMTAwMDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgJiYgcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKSkgfHwgMDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lem9uZSh0aW1lem9uZVN0cmluZykge1xuICBpZiAodGltZXpvbmVTdHJpbmcgPT09ICdaJykgcmV0dXJuIDA7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWV6b25lU3RyaW5nLm1hdGNoKHRpbWV6b25lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gMDtcbiAgdmFyIHNpZ24gPSBjYXB0dXJlc1sxXSA9PT0gJysnID8gLTEgOiAxO1xuICB2YXIgaG91cnMgPSBwYXJzZUludChjYXB0dXJlc1syXSk7XG4gIHZhciBtaW51dGVzID0gY2FwdHVyZXNbM10gJiYgcGFyc2VJbnQoY2FwdHVyZXNbM10pIHx8IDA7XG5cbiAgaWYgKCF2YWxpZGF0ZVRpbWV6b25lKGhvdXJzLCBtaW51dGVzKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICByZXR1cm4gc2lnbiAqIChob3VycyAqIE1JTExJU0VDT05EU19JTl9IT1VSICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUpO1xufVxuXG5mdW5jdGlvbiBkYXlPZklTT1dlZWtZZWFyKGlzb1dlZWtZZWFyLCB3ZWVrLCBkYXkpIHtcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcbiAgZGF0ZS5zZXRVVENGdWxsWWVhcihpc29XZWVrWWVhciwgMCwgNCk7XG4gIHZhciBmb3VydGhPZkphbnVhcnlEYXkgPSBkYXRlLmdldFVUQ0RheSgpIHx8IDc7XG4gIHZhciBkaWZmID0gKHdlZWsgLSAxKSAqIDcgKyBkYXkgKyAxIC0gZm91cnRoT2ZKYW51YXJ5RGF5O1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBkaWZmKTtcbiAgcmV0dXJuIGRhdGU7XG59IC8vIFZhbGlkYXRpb24gZnVuY3Rpb25zXG4vLyBGZWJydWFyeSBpcyBudWxsIHRvIGhhbmRsZSB0aGUgbGVhcCB5ZWFyICh1c2luZyB8fClcblxuXG52YXIgZGF5c0luTW9udGhzID0gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5cbmZ1bmN0aW9uIGlzTGVhcFllYXJJbmRleCh5ZWFyKSB7XG4gIHJldHVybiB5ZWFyICUgNDAwID09PSAwIHx8IHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDA7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSkge1xuICByZXR1cm4gbW9udGggPj0gMCAmJiBtb250aCA8PSAxMSAmJiBkYXRlID49IDEgJiYgZGF0ZSA8PSAoZGF5c0luTW9udGhzW21vbnRoXSB8fCAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMjkgOiAyOCkpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSB7XG4gIHJldHVybiBkYXlPZlllYXIgPj0gMSAmJiBkYXlPZlllYXIgPD0gKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDM2NiA6IDM2NSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlV2Vla0RhdGUoX3llYXIsIHdlZWssIGRheSkge1xuICByZXR1cm4gd2VlayA+PSAxICYmIHdlZWsgPD0gNTMgJiYgZGF5ID49IDAgJiYgZGF5IDw9IDY7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICBpZiAoaG91cnMgPT09IDI0KSB7XG4gICAgcmV0dXJuIG1pbnV0ZXMgPT09IDAgJiYgc2Vjb25kcyA9PT0gMDtcbiAgfVxuXG4gIHJldHVybiBzZWNvbmRzID49IDAgJiYgc2Vjb25kcyA8IDYwICYmIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjAgJiYgaG91cnMgPj0gMCAmJiBob3VycyA8IDI1O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWV6b25lKF9ob3VycywgbWludXRlcykge1xuICByZXR1cm4gbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPD0gNTk7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICB2YXIgbG9jYWxlV2Vla1N0YXJ0c09uID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLndlZWtTdGFydHNPbjtcbiAgdmFyIGRlZmF1bHRXZWVrU3RhcnRzT24gPSBsb2NhbGVXZWVrU3RhcnRzT24gPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIobG9jYWxlV2Vla1N0YXJ0c09uKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IG9wdGlvbnMud2Vla1N0YXJ0c09uID09IG51bGwgPyBkZWZhdWx0V2Vla1N0YXJ0c09uIDogdG9JbnRlZ2VyKG9wdGlvbnMud2Vla1N0YXJ0c09uKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZXZWVrIGZyb20gXCIuLi9zdGFydE9mV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWs/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWs/XG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgd2VlayBzdGFydHMgd2l0aCBNb25kYXksXG4gKiAvLyBhcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0LCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlPcHRpb25zKTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlUmlnaHQsIGRpcnR5T3B0aW9ucyk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZXZWVrLmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZldlZWsuZ2V0VGltZSgpO1xufSIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSAnLi9wcm9qZWN0cy5qcyc7XG5pbXBvcnQgeyBpc1RvZGF5LCBpc1RoaXNXZWVrLCBwYXJzZUlTTyB9IGZyb20gJ2RhdGUtZm5zJztcblxubGV0IHRvRG9MaXN0ID0ge1xuICAgIGRpc3BsYXlBbGwoKSB7XG4gICAgICAgIGxldCBhbGxBcnJheSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IHByb2pOYW1lcyA9IHByb2plY3RzLmdldFByb2plY3ROYW1lcygpO1xuXG4gICAgICAgIHByb2pOYW1lcy5mb3JFYWNoKHByb2ogPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwcm9qZWN0c1twcm9qXS5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICAgICAgYWxsQXJyYXkucHVzaChvYmopO1xuICAgICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICBhbGxBcnJheSA9IHRoaXMuc29ydEJ5SW5wdXRUaW1lKGFsbEFycmF5KTtcblxuICAgICAgICByZXR1cm4gYWxsQXJyYXk7XG4gICAgfSxcblxuICAgIGRpc3BsYXlUb2RheSgpIHtcbiAgICAgICAgbGV0IHRvZGF5QXJyYXkgPSBbXTtcblxuICAgICAgICBjb25zdCBwcm9qTmFtZXMgPSBwcm9qZWN0cy5nZXRQcm9qZWN0TmFtZXMoKTtcblxuICAgICAgICBwcm9qTmFtZXMuZm9yRWFjaChwcm9qID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvamVjdHNbcHJval0uZm9yRWFjaChvYmogPT4ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc1RvZGF5KHBhcnNlSVNPKG9iai5kdWVEYXRlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9kYXlBcnJheS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdG9kYXlBcnJheSA9IHRoaXMuc29ydEJ5SW5wdXRUaW1lKHRvZGF5QXJyYXkpO1xuICAgICAgICAgIFxuICAgICAgICByZXR1cm4gdG9kYXlBcnJheTtcbiAgICB9LFxuXG4gICAgZGlzcGxheVdlZWsoKSB7XG4gICAgICAgIGxldCB3ZWVrQXJyYXkgPSBbXTtcblxuICAgICAgICBjb25zdCBwcm9qTmFtZXMgPSBwcm9qZWN0cy5nZXRQcm9qZWN0TmFtZXMoKTtcblxuICAgICAgICBwcm9qTmFtZXMuZm9yRWFjaChwcm9qID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvamVjdHNbcHJval0uZm9yRWFjaChvYmogPT4ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc1RoaXNXZWVrKHBhcnNlSVNPKG9iai5kdWVEYXRlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2Vla0FycmF5LnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB3ZWVrQXJyYXkgPSB0aGlzLnNvcnRCeUlucHV0VGltZSh3ZWVrQXJyYXkpO1xuICAgICAgICAgIFxuICAgICAgICByZXR1cm4gd2Vla0FycmF5O1xuICAgIH0sXG5cbiAgICBzb3J0QnlJbnB1dFRpbWUoYXJyYXkpIHtcbiAgICAgICAgYXJyYXkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuaWQgPCBiLmlkKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS5pZCA+IGIuaWQpIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbn07XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07XG4iLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdG9kYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUaGlzV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59IiwiaW1wb3J0IHsgZ2V0Rm9ybUluZm8gfSBmcm9tICcuL2FwcC5qcyc7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gJy4vcHJvamVjdHMuanMnO1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tICcuL3RvZG9saXN0LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHRhc2tGdW5jdGlvbnMoKSB7XG5cbiAgICBjb25zdCBuZXdUYXNrID0gKG5hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBhcnJheSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgZHVlRGF0ZSxcbiAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdHMuZ2V0UHJvamVjdE5hbWUoYXJyYXkpXG4gICAgICAgIH1cbiAgICAgICBcbiAgICB9XG5cbiAgICBjb25zdCBhZGRUb1Rhc2tBcnJheSA9ICh0YXNrLCBhcnJheSkgPT4ge1xuICAgICAgICBhcnJheS5wdXNoKHRhc2spO1xuICAgIH1cblxuICAgIGNvbnN0IGdldFRhc2tGcm9tQXJyYXkgPSAoaWQsIGFycmF5KSA9PiB7XG5cbiAgICAgICAgY29uc3QgdGFzayA9IGFycmF5LmZpbmQob2JqID0+IHtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChvYmpbcHJvcF0gPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICB9XG5cbiAgICBjb25zdCBzYXZlVGFza0luQXJyYXkgPSAoaWQsIGRldGFpbHMsIGFycmF5KSA9PiB7ICAgXG4gICAgICAgIGNvbnN0IGluZGV4ID0gYXJyYXkuZmluZEluZGV4KG9iaiA9PiB7XG4gICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtwcm9wXSA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBjb25zdCBkZXRhaWxzT2JqID0ge1xuICAgICAgICAgICAgbmFtZTogZGV0YWlsc1swXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXRhaWxzWzFdLFxuICAgICAgICAgICAgZHVlRGF0ZTogZGV0YWlsc1syXVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHRhc2sgPSBhcnJheVtpbmRleF07XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gZGV0YWlsc09iaikge1xuICAgICAgICAgICAgdGFza1twcm9wXSA9IGRldGFpbHNPYmpbcHJvcF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVGcm9tQXJyYXkgPSAoaWQsIGFycmF5KSA9PiB7ICAgIFxuICAgICAgICBjb25zdCBpbmRleCA9IGFycmF5LmZpbmRJbmRleChvYmogPT4ge1xuICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmpbcHJvcF0gPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB7IG5ld1Rhc2ssIGFkZFRvVGFza0FycmF5LCBnZXRUYXNrRnJvbUFycmF5LCBcbiAgICAgICAgc2F2ZVRhc2tJbkFycmF5LCBkZWxldGVGcm9tQXJyYXkgfVxufSkoKTsiLCJpbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gJy4vcHJvamVjdHMuanMnO1xuaW1wb3J0IHRhc2tGdW5jdGlvbnMgZnJvbSAnLi90YXNrLmpzJztcblxuY29uc3Qgc3RvcmFnZSA9IHtcblxuICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlW3Rhc2sucHJvamVjdF0pIHtcblxuICAgICAgICAgICAgbGV0IHRlbXBBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgICAgIGdldEl0ZW0oYCR7dGFzay5wcm9qZWN0fWApKTtcbiAgICBcbiAgICAgICAgICAgIHRhc2tGdW5jdGlvbnMuYWRkVG9UYXNrQXJyYXkodGFzaywgdGVtcEFycmF5KTtcbiAgICBcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3Rhc2sucHJvamVjdH1gLCBcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0ZW1wQXJyYXkpKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHt0YXNrLnByb2plY3R9YCwgXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShbdGFza10pKTtcblxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGVkaXRUYXNrKGlkLCBkZXRhaWxzLCBhcnJheSkge1xuICAgICAgICBjb25zdCB0YXNrID0gdGFza0Z1bmN0aW9ucy5nZXRUYXNrRnJvbUFycmF5KGlkLCBhcnJheSk7XG5cbiAgICAgICAgbGV0IHRlbXBBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgICAgIGdldEl0ZW0oYCR7dGFzay5wcm9qZWN0fWApKTtcblxuICAgICAgICB0YXNrRnVuY3Rpb25zLnNhdmVUYXNrSW5BcnJheShpZCwgZGV0YWlscywgdGVtcEFycmF5KTtcblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHt0YXNrLnByb2plY3R9YCwgXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0ZW1wQXJyYXkpKTtcbiAgICB9LFxuXG4gICAgZGVsZXRlVGFzayhpZCwgYXJyYXkpIHtcbiAgICAgICAgY29uc3QgdGFzayA9IHRhc2tGdW5jdGlvbnMuZ2V0VGFza0Zyb21BcnJheShpZCwgYXJyYXkpO1xuXG4gICAgICAgIGxldCB0ZW1wQXJyYXkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgICAgICBnZXRJdGVtKGAke3Rhc2sucHJvamVjdH1gKSk7XG5cbiAgICAgICAgdGFza0Z1bmN0aW9ucy5kZWxldGVGcm9tQXJyYXkoaWQsIHRlbXBBcnJheSk7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7dGFzay5wcm9qZWN0fWAsIFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGVtcEFycmF5KSk7XG4gICAgfSxcblxuICAgIHJldHJpZXZlVGFza3MoKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbJ2xlbmd0aCcsICdjbGVhcicsICdrZXknLCAnc2V0SXRlbScsIFxuICAgICAgICAnZ2V0SXRlbScsICdyZW1vdmVJdGVtJ107XG5cbiAgICAgICAgZm9yIChjb25zdCBwcm9qIGluIGxvY2FsU3RvcmFnZSkge1xuXG4gICAgICAgICAgICBpZiAoIShtZXRob2RzLmluY2x1ZGVzKHByb2opKSkge1xuXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlZEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAgICAgICAgIGdldEl0ZW0oYCR7cHJvan1gKSk7XG5cbiAgICAgICAgICAgICAgICBwcm9qZWN0cy5uZXdQcm9qZWN0KHByb2opO1xuXG4gICAgICAgICAgICAgICAgc3RvcmVkQXJyYXkuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNbcHJval0ucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkZWxldGVQcm9qZWN0KHByb2plY3QpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYCR7cHJvamVjdH1gKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IHN0b3JhZ2UgfTsiLCJpbXBvcnQgdGFza0Z1bmN0aW9ucyBmcm9tICcuL3Rhc2suanMnXG5pbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gJy4vdG9kb2xpc3QuanMnXG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gJy4vcHJvamVjdHMuanMnXG5pbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAnLi9zdG9yYWdlLmpzJ1xuXG5jb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UpO1xuXG5jb25zdCBsb2FkUGFnZSA9ICgpID0+IHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3RvcmFnZS5yZXRyaWV2ZVRhc2tzKCk7XG4gICAgICAgIHBvcHVsYXRlUHJvamVjdEJ0bnMoKTtcbiAgICAgICAgc2V0Q3VycmVudEJ0bigpO1xuICAgICAgICBjb25zdCBwcm9qID0gZ2V0Q3VycmVudEJ0bigpO1xuICAgICAgICBjb25zdCBwcm9qTmFtZSA9IHByb2ouaWQuc3BsaXQoJy0nKVsxXTtcbiAgICAgICAgcG9wdWxhdGVUYXNrV2luZG93KHByb2plY3RzW3Byb2pOYW1lXSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWZhdWx0U3RhcnQoKTtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZVRhc2tCdG4oKTtcbiAgICBhY3RpdmF0ZVNpZGVCdG5zKCk7XG4gICAgYWN0aXZhdGVBZGRQcm9qZWN0QnRuKCk7XG59XG5cbmNvbnN0IGRlZmF1bHRTdGFydCA9ICgpID0+IHtcbiAgICBwcm9qZWN0cy5nZW5lcmFsID0gW107XG5cbiAgICBwb3B1bGF0ZVByb2plY3RCdG5zKCk7XG4gICAgc2V0Q3VycmVudEJ0bigpO1xufVxuXG5jb25zdCBhY3RpdmF0ZVRhc2tCdG4gPSAoKSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJyk7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXBwZW5kVGFza0Zvcm0pO1xufVxuXG5jb25zdCBhcHBlbmRUYXNrRm9ybSA9ICgpID0+IHtcbiAgICB0b2dnbGVBZGRUYXNrQnRuKCk7XG5cbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaWQgPSAnZm9ybS1jb250YWluZXInOyBcblxuICAgIGRpdi5pbm5lckhUTUwgPSBcbiAgICBgPGZvcm0gaWQ9XCJ0YXNrLWZvcm1cIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJuZXctdGFzay10aXRsZVwiIGNsYXNzID1cImZvcm0taW5wdXRcIiBcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJUYXNrIG5hbWUuLi5cIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJuZXctdGFzay1kZXNjXCIgY2xhc3M9XCJmb3JtLWlucHV0XCJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJEZXNjcmlwdGlvbi4uLlwiPlxuICAgICAgICA8ZGl2IGlkPVwicHJpLWRhdGUtcm93XCI+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJkdWUtZGF0ZVwiIGlkPVwiZGF0ZS1sYWJlbFwiPkR1ZSBkYXRlOlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cImR1ZS1kYXRlXCIgY2xhc3M9XCJmb3JtLWlucHV0XCI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cImNhbmNlbC10YXNrXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwic3VibWl0LXRhc2tcIj5BZGQ8L2J1dHRvbj5cbiAgICA8L2Zvcm0+YFxuXG4gICAgY29uc3QgdGFza0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0LXdpbmRvdycpO1xuXG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJyk7XG5cbiAgICB0YXNrTGlzdC5pbnNlcnRCZWZvcmUoZGl2LCBidG4pO1xuXG4gICAgYWN0aXZhdGVGb3JtQnRucygpO1xufVxuXG5jb25zdCB0b2dnbGVBZGRUYXNrQnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdGFzaycpO1xuXG4gICAgYnRuLnN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nPyBidG4uc3R5bGUudmlzaWJpbGl0eSBcbiAgICA9ICd2aXNpYmxlJzogYnRuLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbn1cblxuY29uc3QgaGlkZUFkZFRhc2tCdG4gPSAoKSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJyk7XG4gICAgXG4gICAgYnRuLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbn1cblxuY29uc3Qgc2hvd0FkZFRhc2tCdG4gPSAoKSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJyk7XG4gICAgXG4gICAgYnRuLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG59XG5cbmNvbnN0IGFjdGl2YXRlRm9ybUJ0bnMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdC10YXNrJyk7XG4gICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVGFza0J0bkhhbmRsZXIpO1xuXG4gICAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC10YXNrJyk7XG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FuY2VsVGFza0J0bkhhbmRsZXIpO1xufVxuXG5jb25zdCBhZGRUYXNrQnRuSGFuZGxlciA9ICgpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1mb3JtJyk7XG4gICAgXG4gICAgaWYgKGNoZWNrVGFza0Zvcm0oZGl2KSkge1xuICAgIFxuICAgICAgICBjb25zdCBkZXRhaWxzID0gZ2V0Rm9ybUluZm8oZGl2LCAnLmZvcm0taW5wdXQnKTtcblxuICAgICAgICBjb25zdCBhcnJheSA9IHNldEN1cnJlbnRBcnJheSgpOyAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGFzayA9IHRhc2tGdW5jdGlvbnMubmV3VGFzayguLi5kZXRhaWxzLCBhcnJheSk7XG5cbiAgICAgICAgdGFza0Z1bmN0aW9ucy5hZGRUb1Rhc2tBcnJheSh0YXNrLCBhcnJheSk7XG5cbiAgICAgICAgc3RvcmFnZS5hZGRUYXNrKHRhc2spO1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gYXJyYXkubGVuZ3RoLTE7XG5cbiAgICAgICAgYXBwZW5kTmV3VGFzayhhcnJheSwgaW5kZXgpO1xuICAgIFxuICAgICAgICByZW1vdmVUYXNrRm9ybSgpO1xuICAgICAgICB0b2dnbGVBZGRUYXNrQnRuKCk7XG4gICAgfVxufVxuXG5jb25zdCBjYW5jZWxUYXNrQnRuSGFuZGxlciA9ICgpID0+IHtcbiAgICByZW1vdmVUYXNrRm9ybSgpO1xuICAgIHRvZ2dsZUFkZFRhc2tCdG4oKTtcbn1cblxuY29uc3QgY2hlY2tUYXNrRm9ybSA9IChkaXYpID0+IHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRpdi5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1pbnB1dCcpO1xuXG4gICAgY29uc3Qgc3RhdHVzID0gW11cblxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50LnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgc3RhdHVzLnB1c2goZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHN0YXR1cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5jb25zdCByZW1vdmVUYXNrRm9ybSA9ICgpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1jb250YWluZXInKTtcblxuICAgIGRpdi5yZW1vdmUoKTtcbn1cblxuY29uc3QgYXBwZW5kTmV3VGFzayA9IChhcnJheSwgaW5kZXgpID0+IHsgICAgIFxuICAgIGluc2VydFRhc2tOYW1lKGFycmF5LCBpbmRleCk7ICAgIFxuICAgIGluc2VydFRhc2tEYXRlKGFycmF5LCBpbmRleCk7XG59XG5cbmNvbnN0IGluc2VydFRhc2tOYW1lID0gKGFycmF5LCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrLWVudHJ5Jyk7XG5cbiAgICBkaXYuZGF0YXNldC5pZCA9IGFycmF5W2luZGV4XVsnaWQnXTtcblxuICAgIGRpdi5pbm5lckhUTUwgPSBcbiAgICBgPGRpdiBjbGFzcz1cInRhc2stZGV0YWlsc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1lbnRyeS10aXRsZVwiPlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJlZGl0LWRldGFpbHNcIiByZWFkb25seT48L2lucHV0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2otdGFnXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicHJvai1uYW1lXCI+PC9pbnB1dD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInRhc2stZW50cnktaWNvbnNcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtcGx1c1wiPjwvaT5cbiAgICAgICAgPGkgY2xhc3M9XCJmYXIgZmEtZWRpdFwiPjwvaT5cbiAgICAgICAgPGkgY2xhc3M9XCJmYXIgZmEtdHJhc2gtYWx0XCI+PC9pPlxuICAgIDwvZGl2PmBcblxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuZWRpdC1kZXRhaWxzJyk7XG5cbiAgICBuYW1lSW5wdXQudmFsdWUgPSBhcnJheVtpbmRleF1bJ25hbWUnXTtcblxuICAgIGNvbnN0IGdsb2JBcnJheSA9IHNldEN1cnJlbnRBcnJheSgpO1xuXG4gICAgaWYgKGdsb2JBcnJheSA9PT0gdG9Eb0xpc3QpIHtcbiAgICAgICAgY29uc3QgcHJvak5hbWUgPSBkaXYucXVlcnlTZWxlY3RvcignLnByb2otbmFtZScpO1xuXG4gICAgICAgIHByb2pOYW1lLnRleHRDb250ZW50ID0gYCR7YXJyYXlbaW5kZXhdWydwcm9qZWN0J119YDtcbiAgICB9XG5cbiAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd2luZG93Jyk7XG5cbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcblxuICAgIHRhc2tMaXN0Lmluc2VydEJlZm9yZShkaXYsIGJ0bik7XG5cbiAgICBhY3RpdmF0ZVRhc2tJY29ucyhkaXYpO1xufVxuXG5jb25zdCBpbnNlcnRUYXNrRGF0ZSA9IChhcnJheSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgICAgXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2RhdGUtZW50cnknKTtcbiAgICBkaXYuZGF0YXNldC5pZCA9IGFycmF5W2luZGV4XVsnaWQnXTtcblxuICAgIGRpdi5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJkdWUtZGF0ZSBcbiAgICAgICAgZWRpdC1kZXRhaWxzXCIgcmVhZG9ubHk9XCJcIj5gO1xuXG4gICAgY29uc3QgZGF0ZSA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuZHVlLWRhdGUnKTtcbiAgICBkYXRlLnZhbHVlID0gYXJyYXlbaW5kZXhdWydkdWVEYXRlJ107XG5cbiAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd2luZG93Jyk7XG5cbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcblxuICAgIHRhc2tMaXN0Lmluc2VydEJlZm9yZShkaXYsIGJ0bik7XG59XG5cbmNvbnN0IGFjdGl2YXRlVGFza0ljb25zID0gKGRpdikgPT4ge1xuICAgIGNvbnN0IHBsdXMgPSBkaXYucXVlcnlTZWxlY3RvcignLmZhLXBsdXMnKTtcblxuICAgIHBsdXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJY29uc0hhbmRsZXIpO1xuXG4gICAgY29uc3QgZWRpdCA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuZmEtZWRpdCcpO1xuXG4gICAgZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUljb25zSGFuZGxlcik7XG5cbiAgICBjb25zdCB0cmFzaCA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuZmEtdHJhc2gtYWx0Jyk7XG5cbiAgICB0cmFzaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUljb25IYW5kbGVyKTtcbn1cblxuY29uc3QgdG9nZ2xlSWNvbnNIYW5kbGVyID0gKGUpID0+IHtcbiAgICBjb25zdCBkaXYgPSBlLnRhcmdldC5jbG9zZXN0KCcudGFzay1lbnRyeScpO1xuXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0O1xuXG4gICAgY29uc3QgaWQgPSBkaXYuZGF0YXNldC5pZDtcblxuICAgIGxldCBhcnJheSA9IHNldEN1cnJlbnRBcnJheSgpO1xuXG4gICAgaWYgKGFycmF5ID09PSB0b0RvTGlzdCkge1xuICAgICAgICBjb25zdCBwcm9qID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qLW5hbWUnKS50ZXh0Q29udGVudDtcbiAgICAgICAgYXJyYXkgPSBwcm9qZWN0c1twcm9qXTtcbiAgICB9XG5cbiAgICBjb25zdCBkZXRhaWxzID0gdGFza0Z1bmN0aW9ucy5nZXRUYXNrRnJvbUFycmF5KGlkLCBhcnJheSk7XG5cbiAgICBpZiAoKGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS1wbHVzJykpIHx8IFxuICAgIChpY29uLmNsYXNzTGlzdC5jb250YWlucygnZmEtbWludXMnKSkpIHtcblxuICAgICAgICB0b2dnbGVQbHVzSWNvbihkZXRhaWxzLCBpY29uLCBkaXYpO1xuXG4gICAgfSBlbHNlIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucygnZmEtZWRpdCcpKSB7XG5cbiAgICAgICAgZWRpdERldGFpbHMoZGl2LCBkZXRhaWxzKTtcblxuICAgIH1cbn1cblxuY29uc3QgdG9nZ2xlUGx1c0ljb24gPSAoZGV0YWlscywgaWNvbiwgZGl2KSA9PiB7XG4gICAgaWYgKGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS1wbHVzJykpIHtcblxuICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXBsdXMnKTtcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1taW51cycpO1xuXG4gICAgICAgIGFwcGVuZFRhc2tEZXRhaWxzKGRldGFpbHMsIGljb24pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLW1pbnVzJyk7XG4gICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtcGx1cycpO1xuXG4gICAgICAgIG1pbmltaXNlVGFzayhkaXYsIGRldGFpbHMpO1xuICAgIH1cbn1cblxuY29uc3QgbWluaW1pc2VUYXNrID0gKGRpdiwgZGV0YWlscykgPT4ge1xuICAgIGNvbnN0IGRldGFpbHNEaXYgPSBkaXYucXVlcnlTZWxlY3RvcignLmFwcGVuZC1kZXRhaWxzJyk7XG5cbiAgICBkZXRhaWxzRGl2LnJlbW92ZSgpO1xuXG4gICAgY29uc3QgZGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWlkPVwiJHtkZXRhaWxzLmlkfVwiXWApO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1idG4nKTtcblxuICAgIGlmIChzYXZlQnRuKSB7XG4gICAgICAgIHRvZ2dsZUVkaXRJY29uKGRpdik7XG4gICAgICAgIHRvZ2dsZVJlYWRPbmx5KGRpdnMpO1xuICAgICAgICB0b2dnbGVFZGl0SGlnaGxpZ2h0KGRpdnMpO1xuICAgICAgICByZW1vdmVTYXZlQnRuKGRpdik7XG4gICAgfVxufVxuXG5jb25zdCBhcHBlbmRUYXNrRGV0YWlscyA9IChkZXRhaWxzLCBpY29uKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBcbiAgICBgPHRleHRhcmVhIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0YXNrLWRlc2MgZWRpdC1kZXRhaWxzXCIgXG4gICAgICAgIHJlYWRvbmx5PjwvdGV4dGFyZWE+YDtcblxuICAgIGNvbnN0IHBhcmVudERpdiA9IGljb24uY2xvc2VzdCgnLnRhc2stZW50cnknKTtcblxuICAgIGNvbnN0IHRhc2tOYW1lRGl2ID0gcGFyZW50RGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWRldGFpbHMnKTtcblxuICAgIGNvbnN0IGRldGFpbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkZXRhaWxzRGl2LmNsYXNzTGlzdC5hZGQoJ2FwcGVuZC1kZXRhaWxzJyk7XG5cbiAgICBkZXRhaWxzRGl2LmlubmVySFRNTCA9IGVsZW1lbnRzO1xuXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkZXRhaWxzRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWRlc2MnKTtcbiAgICBkZXNjcmlwdGlvbi52YWx1ZSA9IGRldGFpbHMuZGVzY3JpcHRpb247XG5cbiAgICB0YXNrTmFtZURpdi5hcHBlbmRDaGlsZChkZXRhaWxzRGl2KTtcblxuICAgIGF1dG9IZWlnaHQoJy50YXNrLWRlc2MnKTtcbn1cblxuY29uc3QgYXV0b0hlaWdodCA9IChlbGVtZW50KSA9PiB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke2VsZW1lbnR9YCk7XG4gICAgXG4gICAgZWwuc3R5bGUuaGVpZ2h0ID0gKGVsLnNjcm9sbEhlaWdodCkgKyAncHgnO1xufVxuXG5jb25zdCBlZGl0RGV0YWlscyA9IChkaXYsIGRldGFpbHMpID0+IHtcbiAgICBjb25zdCBpY29uID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJy5mYS1wbHVzJyk7XG5cbiAgICBpZiAoIShkaXYucXVlcnlTZWxlY3RvcignLmFwcGVuZC1kZXRhaWxzJykpKSB7XG4gICAgICAgIHRvZ2dsZVBsdXNJY29uKGRldGFpbHMsIGljb24sIGRpdik7XG4gICAgfSAgIFxuXG4gICAgY29uc3QgZGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWlkPVwiJHtkZXRhaWxzLmlkfVwiXWApO1xuXG4gICAgdG9nZ2xlUmVhZE9ubHkoZGl2cyk7XG4gICAgdG9nZ2xlRWRpdEhpZ2hsaWdodChkaXZzKTtcbiAgICBpbnNlcnRTYXZlQnRuKGRpdik7XG5cbn1cblxuY29uc3QgdG9nZ2xlUmVhZE9ubHkgPSAoZGl2cykgPT4ge1xuICAgIGRpdnMuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtZGV0YWlscycpO1xuXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5yZWFkT25seSB8fCBpbnB1dC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGlucHV0LnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlXG4gICAgICAgICAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuY29uc3QgdG9nZ2xlRWRpdEhpZ2hsaWdodCA9IChkaXZzKSA9PiB7XG4gICAgZGl2cy5mb3JFYWNoKGRpdiA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IGRpdi5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1kZXRhaWxzJyk7XG5cbiAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC1oaWdobGlnaHQnKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXQtaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2VkaXQtaGlnaGxpZ2h0Jyk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IGluc2VydFNhdmVCdG4gPSAoZGl2KSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3NhdmUtYnRuJyk7XG4gICAgYnRuLnRleHRDb250ZW50ID0gJ1NhdmUnO1xuXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZUJ0bkhhbmRsZXIpO1xuXG4gICAgZGl2LmFwcGVuZENoaWxkKGJ0bik7XG5cbiAgICB0b2dnbGVFZGl0SWNvbihkaXYpO1xufVxuXG5jb25zdCBzYXZlQnRuSGFuZGxlciA9IChlKSA9PiB7XG4gICAgY29uc3QgZGl2ID0gZS50YXJnZXQuY2xvc2VzdCgnLnRhc2stZW50cnknKTtcblxuICAgIGNvbnN0IGlkID0gZGl2LmRhdGFzZXQuaWQ7XG5cbiAgICBjb25zdCBkaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtaWQ9XCIke2lkfVwiXWApO1xuXG4gICAgY29uc3QgcHJvak5hbWUgPSBkaXYucXVlcnlTZWxlY3RvcignLnByb2otbmFtZScpO1xuXG4gICAgbGV0IGFycmF5ID0gc2V0Q3VycmVudEFycmF5KCk7XG5cbiAgICBpZiAoYXJyYXkgPT09IHRvRG9MaXN0KSB7XG4gICAgICAgIGFycmF5ID0gcHJvamVjdHNbcHJvak5hbWUudGV4dENvbnRlbnRdO1xuICAgIH1cblxuICAgIGNvbnN0IGRldGFpbHMgPSBnZXRGb3JtSW5mbyhkaXZzLCAnLmVkaXQtZGV0YWlscycpO1xuXG4gICAgcmVtb3ZlU2F2ZUJ0bihkaXYpO1xuICAgIHRvZ2dsZUVkaXRJY29uKGRpdik7XG5cbiAgICB0YXNrRnVuY3Rpb25zLnNhdmVUYXNrSW5BcnJheShpZCwgZGV0YWlscywgYXJyYXkpO1xuICAgIHN0b3JhZ2UuZWRpdFRhc2soaWQsIGRldGFpbHMsIGFycmF5KTtcblxuICAgIHRvZ2dsZVJlYWRPbmx5KGRpdnMpO1xuICAgIHRvZ2dsZUVkaXRIaWdobGlnaHQoZGl2cyk7XG59XG5cbmNvbnN0IHJlbW92ZVNhdmVCdG4gPSAoZGl2KSA9PiB7XG4gICAgY29uc3Qgc2F2ZUJ0biA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1idG4nKTtcblxuICAgIGlmIChzYXZlQnRuKSB7XG4gICAgICAgIHNhdmVCdG4ucmVtb3ZlKCk7XG4gICAgfVxufVxuXG5jb25zdCBnZXRGb3JtSW5mbyA9IChkaXZzLCBzZWxlY3RvcikgPT4ge1xuICAgIGlmIChOb2RlTGlzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihkaXZzKSkge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcblxuICAgICAgICBkaXZzLmZvckVhY2goZGl2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gdmFsdWVzLnB1c2goZWxlbWVudC52YWx1ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcblxuICAgIH0gZWxzZSB7XG4gICAgXG4gICAgY29uc3QgZWxlbWVudHMgPSBkaXZzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gICAgY29uc3QgdmFsdWVzID0gW107XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gdmFsdWVzLnB1c2goZWxlbWVudC52YWx1ZSkpO1xuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG59XG5cbmNvbnN0IHRvZ2dsZUVkaXRJY29uID0gKGRpdikgPT4ge1xuICAgIGNvbnN0IGljb24gPSBkaXYucXVlcnlTZWxlY3RvcignLmZhLWVkaXQnKTtcblxuICAgIGlmIChpY29uLnN0eWxlLnBvaW50ZXJFdmVudHMgPT09ICdub25lJykge1xuICAgICAgICBpY29uLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWNvbi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIH1cbn1cblxuY29uc3QgcmVtb3ZlSWNvbkhhbmRsZXIgPSAoZSkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrLWVudHJ5Jyk7XG5cbiAgICBjb25zdCBpZCA9IGRpdi5kYXRhc2V0LmlkO1xuXG4gICAgY29uc3QgcHJvak5hbWUgPSBkaXYucXVlcnlTZWxlY3RvcignLnByb2otbmFtZScpO1xuXG4gICAgbGV0IGFycmF5ID0gc2V0Q3VycmVudEFycmF5KCk7XG5cbiAgICBpZiAoYXJyYXkgPT09IHRvRG9MaXN0KSB7XG4gICAgICAgIGFycmF5ID0gcHJvamVjdHNbcHJvak5hbWUudGV4dENvbnRlbnRdO1xuICAgIH1cblxuICAgIHJlbW92ZVRhc2tBbmREYXRlKGlkKTtcblxuICAgIHN0b3JhZ2UuZGVsZXRlVGFzayhpZCwgYXJyYXkpO1xuXG4gICAgdGFza0Z1bmN0aW9ucy5kZWxldGVGcm9tQXJyYXkoaWQsIGFycmF5KTtcbn1cblxuY29uc3QgcmVtb3ZlVGFza0FuZERhdGUgPSAoaWQpID0+IHtcbiAgICBjb25zdCBkaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtaWQ9XCIke2lkfVwiXWApO1xuXG4gICAgZGl2cy5mb3JFYWNoKGRpdiA9PiBkaXYucmVtb3ZlKCkpO1xufVxuXG5jb25zdCBhY3RpdmF0ZVNpZGVCdG5zID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1idG4nKTtcblxuICAgIGJ0bnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBcbiAgICAgICAgc2lkZUJ0bkNsaWNrZWQpO1xuICAgIH0pO1xufVxuXG5jb25zdCBzaWRlQnRuQ2xpY2tlZCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lID09ICdJJykge1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHVybk9mZlNpZGVCdG5zKCk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudEJ0biA9IGUuY3VycmVudFRhcmdldDtcblxuICAgICAgICBjdXJyZW50QnRuLmNsYXNzTGlzdC5hZGQoJ3NpZGUtYnRuLWFjdGl2ZScpO1xuXG4gICAgICAgIGNsZWFyVGFza1dpbmRvdygpO1xuXG4gICAgICAgIGNvbnN0IGFycmF5ID0gc2V0Q3VycmVudEFycmF5KCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRCdG4uaWQgPT09ICdkaXNwbGF5LWFsbCcpIHtcbiAgICAgICAgICAgIGhpZGVBZGRUYXNrQnRuKCk7XG4gICAgICAgICAgICBwb3B1bGF0ZVRhc2tXaW5kb3codG9Eb0xpc3QuZGlzcGxheUFsbCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50QnRuLmlkID09PSAnZGlzcGxheS10b2RheScpIHtcbiAgICAgICAgICAgIGhpZGVBZGRUYXNrQnRuKCk7XG4gICAgICAgICAgICBwb3B1bGF0ZVRhc2tXaW5kb3codG9Eb0xpc3QuZGlzcGxheVRvZGF5KCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRCdG4uaWQgPT09ICdkaXNwbGF5LXdlZWsnKSB7XG4gICAgICAgICAgICBoaWRlQWRkVGFza0J0bigpO1xuICAgICAgICAgICAgcG9wdWxhdGVUYXNrV2luZG93KHRvRG9MaXN0LmRpc3BsYXlXZWVrKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvd0FkZFRhc2tCdG4oKTtcbiAgICAgICAgICAgIHBvcHVsYXRlVGFza1dpbmRvdyhhcnJheSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGNsZWFyVGFza1dpbmRvdyA9ICgpID0+IHtcbiAgICBjb25zdCB0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWVudHJ5Jyk7XG5cbiAgICBjb25zdCBkYXRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLWVudHJ5Jyk7XG5cbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4gdGFzay5yZW1vdmUoKSk7XG5cbiAgICBkYXRlcy5mb3JFYWNoKGRhdGUgPT4gZGF0ZS5yZW1vdmUoKSk7XG5cbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJyk7XG5cbiAgICBpZiAoZm9ybSkge1xuICAgICAgICBmb3JtLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuY29uc3QgcG9wdWxhdGVUYXNrV2luZG93ID0gKGFycmF5KSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcHBlbmROZXdUYXNrKGFycmF5LCBpKTtcbiAgICB9XG59XG5cbmNvbnN0IHR1cm5PZmZTaWRlQnRucyA9ICgpID0+IHtcbiAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUtYnRuJyk7XG5cbiAgICBidG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGUtYnRuLWFjdGl2ZScpO1xuICAgIH0pO1xufVxuXG5jb25zdCBzZXRDdXJyZW50QnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2pCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2otYnRuJyk7XG4gICAgXG4gICAgcHJvakJ0bnNbMF0uY2xhc3NMaXN0LmFkZCgnc2lkZS1idG4tYWN0aXZlJyk7XG59XG5cbmNvbnN0IGdldEN1cnJlbnRCdG4gPSAoKSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGUtYnRuLWFjdGl2ZScpO1xuICAgIHJldHVybiBidG47XG59XG5cbmNvbnN0IHNldEN1cnJlbnRBcnJheSA9ICgpID0+IHtcbiAgICBpZiAoZ2V0Q3VycmVudEJ0bigpLmNsb3Nlc3QoJy50YXNrLXZpZXctbWVudScpKSB7XG4gICAgICAgIHJldHVybiB0b0RvTGlzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZ2V0Q3VycmVudEJ0bigpLmlkLnNwbGl0KCctJylbMV07XG5cbiAgICAgICAgcmV0dXJuIHByb2plY3RzW3Byb2plY3RdO1xuICAgIH1cbn1cblxuY29uc3QgYWN0aXZhdGVBZGRQcm9qZWN0QnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpO1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFByb2plY3RCdG5IYW5kbGVyKTtcbn1cblxuY29uc3QgYWRkUHJvamVjdEJ0bkhhbmRsZXIgPSAoKSA9PiB7XG4gICAgdG9nZ2xlQWRkUHJvamVjdEJ0bigpO1xuICAgIGluc2VydFByb2plY3RGb3JtKCk7XG59XG5cbmNvbnN0IGluc2VydFByb2plY3RGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvcm0tYm94Jyk7XG5cbiAgICBkaXYuaW5uZXJIVE1MID0gXG4gICAgYDxmb3JtIGlkPVwicHJvamVjdC1mb3JtXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmV3LXByb2plY3QtdGl0bGVcIiBjbGFzcyA9XCJmb3JtLWlucHV0XCIgXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvamVjdCBuYW1lLi4uXCI+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwiY2FuY2VsLXByb2plY3RcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzdWJtaXQtcHJvamVjdFwiPkFkZDwvYnV0dG9uPlxuICAgIDwvZm9ybT5gO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWwtcHJvamVjdCcpO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbFByb2plY3RCdG5IYW5kbGVyKTtcblxuICAgIGNvbnN0IGFkZEJ0biA9IGRpdi5xdWVyeVNlbGVjdG9yKCcjc3VibWl0LXByb2plY3QnKTtcbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdWJtaXRQcm9qZWN0QnRuSGFuZGxlcik7XG5cbiAgICBjb25zdCBwcm9qZWN0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXZpZXctbWVudScpO1xuXG4gICAgY29uc3QgaGlkZGVuQnRuID0gcHJvamVjdE1lbnUucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0Jyk7XG5cbiAgICBwcm9qZWN0TWVudS5pbnNlcnRCZWZvcmUoZGl2LCBoaWRkZW5CdG4pO1xufVxuXG5jb25zdCB0b2dnbGVBZGRQcm9qZWN0QnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpO1xuXG4gICAgYnRuLnN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nPyBidG4uc3R5bGUudmlzaWJpbGl0eSBcbiAgICA9ICd2aXNpYmxlJzogYnRuLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbn1cblxuY29uc3QgY2FuY2VsUHJvamVjdEJ0bkhhbmRsZXIgPSAoKSA9PiB7XG4gICAgcmVtb3ZlUHJvamVjdEZvcm0oKTtcbiAgICB0b2dnbGVBZGRQcm9qZWN0QnRuKCk7XG59XG5cbmNvbnN0IHJlbW92ZVByb2plY3RGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1mb3JtLWJveCcpO1xuXG4gICAgZm9ybUJveC5yZW1vdmUoKTtcbn1cblxuY29uc3Qgc3VibWl0UHJvamVjdEJ0bkhhbmRsZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvakRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWZvcm0tYm94Jyk7XG5cbiAgICBpZiAocHJvakRpdi5xdWVyeVNlbGVjdG9yKCcuZm9ybS1pbnB1dCcpLnZhbHVlICE9PSAnJykgeyAgICAgICAgXG4gICAgICAgIGxldCBwcm9qTmFtZSA9IGdldEZvcm1JbmZvKHByb2pEaXYsICcuZm9ybS1pbnB1dCcpO1xuXG4gICAgICAgIHByb2pOYW1lID0gdW5kZXJzY29yZVByb2pOYW1lKHByb2pOYW1lWzBdKTtcblxuICAgICAgICBwcm9qZWN0cy5uZXdQcm9qZWN0KHByb2pOYW1lKTtcblxuICAgICAgICByZW1vdmVQcm9qZWN0Rm9ybSgpO1xuXG4gICAgICAgIGNsZWFyUHJvamVjdEJ0bnMoKTtcblxuICAgICAgICBwb3B1bGF0ZVByb2plY3RCdG5zKCk7XG5cbiAgICAgICAgdHVybk9mZlNpZGVCdG5zKCk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JcbiAgICAgICAgICAgIChgI3Byb2otJHtwcm9qTmFtZX1gKTtcbiAgICBcbiAgICAgICAgY3VycmVudEJ0bi5jbGFzc0xpc3QuYWRkKCdzaWRlLWJ0bi1hY3RpdmUnKTtcbiAgICBcbiAgICAgICAgY2xlYXJUYXNrV2luZG93KCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGFycmF5ID0gc2V0Q3VycmVudEFycmF5KCk7XG5cbiAgICAgICAgc2hvd0FkZFRhc2tCdG4oKTtcblxuICAgICAgICBwb3B1bGF0ZVRhc2tXaW5kb3coYXJyYXkpO1xuXG4gICAgICAgIHRvZ2dsZUFkZFByb2plY3RCdG4oKTtcbiAgICB9XG59XG5cbmNvbnN0IGNsZWFyUHJvamVjdEJ0bnMgPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvakRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXZpZXctbWVudScpO1xuXG4gICAgY29uc3QgYnRucyA9IHByb2pEaXYucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUtYnRuJyk7XG5cbiAgICBidG5zLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XG59XG5cbmNvbnN0IHBvcHVsYXRlUHJvamVjdEJ0bnMgPSAoKSA9PiB7XG4gICAgY29uc3QgYnRuQXJyYXkgPSBwcm9qZWN0cy5nZXRQcm9qZWN0TmFtZXMoKTtcblxuICAgIGNvbnN0IHByb2pEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC12aWV3LW1lbnUnKTtcblxuICAgIGNvbnN0IGhpZGRlbkJ0biA9IHByb2pEaXYucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0Jyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ0bkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidG4uaWQgPSBgcHJvai0ke2J0bkFycmF5W2ldfWA7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdzaWRlLWJ0bicpO1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgncHJvai1idG4nKTtcblxuICAgICAgICBsZXQgbmFtZVVwcGVyID0gZGVzY29yZVByb2pOYW1lKGJ0bkFycmF5W1tpXV0pO1xuXG4gICAgICAgIG5hbWVVcHBlciA9IG5hbWVVcHBlci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIFxuICAgICAgICBuYW1lVXBwZXIuc2xpY2UoMSk7XG5cbiAgICAgICAgYnRuLmlubmVySFRNTCA9IFxuICAgICAgICAgICAgYDxzcGFuPiR7bmFtZVVwcGVyfTwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZW0taWNvbi1ib3hcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgPC9kaXY+YDtcblxuICAgICAgICBjb25zdCBpY29uID0gYnRuLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcblxuICAgICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlUHJvamVjdEhhbmRsZXIpO1xuXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNpZGVCdG5DbGlja2VkKTtcblxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgaWNvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9KTtcblxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpY29uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvakRpdi5pbnNlcnRCZWZvcmUoYnRuLCBoaWRkZW5CdG4pO1xuICAgIH1cbn1cblxuY29uc3QgcmVtb3ZlUHJvamVjdEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgIGNvbnN0IGJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zaWRlLWJ0bicpO1xuXG4gICAgY29uc3QgcHJvamVjdCA9IGJ0bi5pZC5zcGxpdCgnLScpWzFdO1xuXG4gICAgY29uc3QgaW5kZXggPSBwcm9qZWN0cy5nZXRQcm9qSW5kZXgocHJvamVjdCk7XG5cbiAgICBkZWxldGUgcHJvamVjdHNbcHJvamVjdF07XG5cbiAgICBzdG9yYWdlLmRlbGV0ZVByb2plY3QocHJvamVjdCk7XG5cbiAgICBpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucygnc2lkZS1idG4tYWN0aXZlJykpIHtcbiAgICAgICAgY29uc3QgcHJvak5hbWVzID0gcHJvamVjdHMuZ2V0UHJvamVjdE5hbWVzKCk7XG5cbiAgICAgICAgbGV0IG5ld1Byb2ogPSBwcm9qTmFtZXNbaW5kZXhdO1xuXG4gICAgICAgIGlmIChpbmRleCA+IHByb2pOYW1lcy5sZW5ndGgtMSkge1xuICAgICAgICAgICAgbmV3UHJvaiA9IHByb2pOYW1lc1tpbmRleC0xXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ0bi5yZW1vdmUoKTtcblxuICAgICAgICBjbGVhclRhc2tXaW5kb3coKTtcblxuICAgICAgICBjb25zdCBidG5BcnJheSA9IHByb2plY3RzLmdldFByb2plY3ROYW1lcygpO1xuXG4gICAgICAgIGlmIChidG5BcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3Byb2otJHtuZXdQcm9qfWApO1xuICAgICAgICAgICAgY3VycmVudEJ0bi5jbGFzc0xpc3QuYWRkKCdzaWRlLWJ0bi1hY3RpdmUnKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IHNldEN1cnJlbnRBcnJheSgpO1xuICAgICAgICBcbiAgICAgICAgICAgIHNob3dBZGRUYXNrQnRuKCk7XG5cbiAgICAgICAgICAgIHBvcHVsYXRlVGFza1dpbmRvdyhhcnJheSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoaWRlQWRkVGFza0J0bigpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLnJlbW92ZSgpO1xuICAgIH0gIFxufVxuXG5jb25zdCB1bmRlcnNjb3JlUHJvak5hbWUgPSAobmFtZSkgPT4ge1xuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgnICcpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICBsZXQgc2NvcmVkTmFtZSA9IHBhcnRzWzBdO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2NvcmVkTmFtZSArPSAoJ18nICsgcGFydHNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjb3JlZE5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxufVxuXG5jb25zdCBkZXNjb3JlUHJvak5hbWUgPSAobmFtZSkgPT4ge1xuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgnXycpO1xuXG4gICAgbGV0IHNwYWNlZE5hbWUgPSBwYXJ0c1swXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNwYWNlZE5hbWUgKz0gKCcgJyArIHBhcnRzW2ldKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNwYWNlZE5hbWU7XG59XG5cbmV4cG9ydCB7IGxvYWRQYWdlLCBnZXRGb3JtSW5mbywgYWRkVGFza0J0bkhhbmRsZXIsIFxuICAgIHNhdmVCdG5IYW5kbGVyIH07IiwiaW1wb3J0IHsgbG9hZFBhZ2UgfSBmcm9tICcuL21vZHVsZXMvYXBwLmpzJ1xuaW1wb3J0ICcuLy4uL3N0eWxlcy9zdHlsZS5jc3MnXG5cbndpbmRvdy5vbmxvYWQgPSBsb2FkUGFnZSgpOyJdLCJzb3VyY2VSb290IjoiIn0=